"use strict";(self.webpackChunkdocs_contracts=self.webpackChunkdocs_contracts||[]).push([[611],{3905:(t,e,n)=>{n.d(e,{Zo:()=>s,kt:()=>m});var i=n(7294);function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function r(t,e){if(null==t)return{};var n,i,l=function(t,e){if(null==t)return{};var n,i,l={},o=Object.keys(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||(l[n]=t[n]);return l}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(l[n]=t[n])}return l}var c=i.createContext({}),d=function(t){var e=i.useContext(c),n=e;return t&&(n="function"==typeof t?t(e):a(a({},e),t)),n},s=function(t){var e=d(t.components);return i.createElement(c.Provider,{value:e},t.children)},_="mdxType",u={inlineCode:"code",wrapper:function(t){var e=t.children;return i.createElement(i.Fragment,{},e)}},f=i.forwardRef((function(t,e){var n=t.components,l=t.mdxType,o=t.originalType,c=t.parentName,s=r(t,["components","mdxType","originalType","parentName"]),_=d(n),f=l,m=_["".concat(c,".").concat(f)]||_[f]||u[f]||o;return n?i.createElement(m,a(a({ref:e},s),{},{components:n})):i.createElement(m,a({ref:e},s))}));function m(t,e){var n=arguments,l=e&&e.mdxType;if("string"==typeof t||l){var o=n.length,a=new Array(o);a[0]=f;var r={};for(var c in e)hasOwnProperty.call(e,c)&&(r[c]=e[c]);r.originalType=t,r[_]="string"==typeof t?t:l,a[1]=r;for(var d=2;d<o;d++)a[d]=n[d];return i.createElement.apply(null,a)}return i.createElement.apply(null,n)}f.displayName="MDXCreateElement"},2113:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>o,metadata:()=>r,toc:()=>d});var i=n(7462),l=(n(7294),n(3905));const o={sidebar_position:1},a="NFT Collection Standard",r={unversionedId:"nft/NFTCollection",id:"nft/NFTCollection",title:"NFT Collection Standard",description:"This NFT Collection smart contract provides a framework for NFT collections that comply with the TEP-0062 standard.",source:"@site/docs/nft/NFTCollection.mdx",sourceDirName:"nft",slug:"/nft/NFTCollection",permalink:"/docs.contracts/docs/nft/NFTCollection",draft:!1,editUrl:"https://github.com/Ton-Dynasty/tondynasty-contracts/pulls/docs/nft/NFTCollection.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Tutorial - NFT",permalink:"/docs.contracts/docs/category/tutorial---nft"},next:{title:"NFT Item Standard",permalink:"/docs.contracts/docs/nft/NFTItem"}},c={},d=[{value:"Overview",id:"overview",level:2},{value:"CollectionData Structure",id:"collectiondata-structure",level:3},{value:"NFTCollectionStandard Trait",id:"nftcollectionstandard-trait",level:3},{value:"Internal Functions and Get Methods",id:"internal-functions-and-get-methods",level:2},{value:"Internal Functions",id:"internal-functions",level:3},{value:"<code>_get_nft_item_state_init(index: Int): StateInit</code>",id:"_get_nft_item_state_initindex-int-stateinit",level:4},{value:"<code>_get_nft_content(index: Int, individual_content: Cell): Cell</code>",id:"_get_nft_contentindex-int-individual_content-cell-cell",level:4},{value:"<code>_get_collection_data(): CollectionData</code>",id:"_get_collection_data-collectiondata",level:4},{value:"Get Methods",id:"get-methods",level:3},{value:"<code>get_collection_data(): CollectionData</code>",id:"get_collection_data-collectiondata",level:4},{value:"<code>get_nft_address_by_index(index: Int): Address</code>",id:"get_nft_address_by_indexindex-int-address",level:4},{value:"<code>get_nft_content(index: Int, individual_content: Cell): Cell</code>",id:"get_nft_contentindex-int-individual_content-cell-cell",level:4},{value:"Usage",id:"usage",level:2},{value:"Basic Usage",id:"basic-usage",level:3}],s={toc:d},_="wrapper";function u(t){let{components:e,...n}=t;return(0,l.kt)(_,(0,i.Z)({},s,n,{components:e,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"nft-collection-standard"},"NFT Collection Standard"),(0,l.kt)("p",null,"This NFT Collection smart contract provides a framework for NFT collections that comply with the ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/ton-blockchain/TEPs/blob/master/text/0062-nft-standard.md"},"TEP-0062 standard"),"."),(0,l.kt)("h2",{id:"overview"},"Overview"),(0,l.kt)("p",null,"In the TEP-0062 standard, each NFT collection is associated with an NFT Collection smart contract, which stores basic information about the collection, including the next item index, collection content, and owner address."),(0,l.kt)("h3",{id:"collectiondata-structure"},"CollectionData Structure"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-typescript"},"struct CollectionData {\n    next_item_index: Int;     // collection should issue NFT with sequential indexes starting from 1. -1 value implies non-sequential collections.\n    collection_content: Cell; // collection content format should comply with TEP64 \n    owner_address: Address;   // collection owner address, zero address if no owner\n}\n")),(0,l.kt)("h3",{id:"nftcollectionstandard-trait"},"NFTCollectionStandard Trait"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-typescript"},'contract ExampleNFTCollection with NFTCollectionStandard, NFTRoyaltyStandard, Estimatable, Deployable {\n    next_item_index: Int as uint32 = 0; // if next_item_index is not -1, means sequential minting is enabled. We want a sequential minting in this example so we set it to uint32.\n    collection_content: Cell;           // collection_content may be the prefix of individual_content\n    owner_address: Address;             // owner_address is the address of the owner of the collection\n    royalty_params: RoyaltyParams;      // royalty_params is the params of royalty\n    \n    init(owner_address: Address, collection_content: Cell, royalty_params: RoyaltyParams) {\n        self.owner_address = owner_address;\n        self.collection_content = collection_content;\n        self.royalty_params = royalty_params;\n    }\n\n    // @dev Mint is not the standard function of NFTCollection, so we need to define it by ourselves\n    receive("Mint") {\n        let ctx: Context = context();\n        let nftItemInit: StateInit = self._get_nft_item_state_init(self.next_item_index);\n        send(SendParameters{\n                to: contractAddress(nftItemInit), \n                value: self.estimate_rest_value(ctx), \n                bounce: false,\n                mode: SendIgnoreErrors,\n                body: Transfer {\n                    query_id: 0,\n                    new_owner: ctx.sender,\n                    response_destination: ctx.sender,\n                    custom_payload: emptyCell(),\n                    forward_amount: 0,\n                    forward_payload: emptySlice()\n                }.toCell(),\n                code: nftItemInit.code,\n                data: nftItemInit.data\n            });\n        self.next_item_index = self.next_item_index + 1;\n    }\n\n    // @dev _get_nft_item_state_init returns the initCode of NFTItem\n    override inline fun _get_nft_item_state_init(index: Int): StateInit {\n        return initOf ExampleNFTItem(myAddress(), index, self.owner_address, self.collection_content);\n    }\n}\n')),(0,l.kt)("h2",{id:"internal-functions-and-get-methods"},"Internal Functions and Get Methods"),(0,l.kt)("h3",{id:"internal-functions"},"Internal Functions"),(0,l.kt)("h4",{id:"_get_nft_item_state_initindex-int-stateinit"},(0,l.kt)("inlineCode",{parentName:"h4"},"_get_nft_item_state_init(index: Int): StateInit")),(0,l.kt)("p",null,"Calculates the initial code for the NFT item contract by item index. This function MUST be overridden in a custom contract."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-typescript"},"abstract inline fun _get_nft_item_state_init(index: Int): StateInit;\n")),(0,l.kt)("h4",{id:"_get_nft_contentindex-int-individual_content-cell-cell"},(0,l.kt)("inlineCode",{parentName:"h4"},"_get_nft_content(index: Int, individual_content: Cell): Cell")),(0,l.kt)("p",null,"Gets the serial number of the NFT item of this collection and the individual content of this NFT item, returns the full content of the NFT item in a format that complies with standard TEP-64."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-typescript"},"// @dev _get_nft_content gets the serial number of the NFT item of this collection and the individual content of this NFT item.\n//      returns the full content of the NFT item in format that complies with standard TEP-64.\n// @note one MUST override this function to provide full NFT item content\nvirtual inline fun _get_nft_content(index: Int, individual_content: Cell): Cell {\n    let builder: StringBuilder = beginString();\n    let idvStr: String = individual_content.asSlice().asString();\n    builder.append(idvStr);\n    return builder.toCell();\n}\n")),(0,l.kt)("h4",{id:"_get_collection_data-collectiondata"},(0,l.kt)("inlineCode",{parentName:"h4"},"_get_collection_data(): CollectionData")),(0,l.kt)("p",null,"Returns NFT collection data."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-typescript"},"// @dev get_collection_data returns nft collection data\nvirtual inline fun _get_collection_data(): CollectionData {\n    let builder: StringBuilder = beginString();\n    let urlPrefix: String = self.collection_content.asSlice().asString();\n    builder.append(urlPrefix);\n    builder.append(self.NFT_COLLECTION_STANDARD_METADATA);\n    return CollectionData {\n        next_item_index: self.next_item_index,\n        collection_content: builder.toCell(),\n        owner_address: self.owner_address\n    };\n}\n")),(0,l.kt)("h3",{id:"get-methods"},"Get Methods"),(0,l.kt)("h4",{id:"get_collection_data-collectiondata"},(0,l.kt)("inlineCode",{parentName:"h4"},"get_collection_data(): CollectionData")),(0,l.kt)("p",null,"Retrieves collection data."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-typescript"},"get fun get_collection_data(): CollectionData {\n    return self._get_collection_data();\n}\n")),(0,l.kt)("h4",{id:"get_nft_address_by_indexindex-int-address"},(0,l.kt)("inlineCode",{parentName:"h4"},"get_nft_address_by_index(index: Int): Address")),(0,l.kt)("p",null,"Gets the address of the NFT item of this collection by its serial number."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-typescript"},"// @dev get_nft_address_by_index gets the serial number of NFT item of this collection and returns its address\nget fun get_nft_address_by_index(index: Int): Address {\n    let initCode: StateInit = self._get_nft_item_state_init(index);\n    return contractAddress(initCode);\n}\n")),(0,l.kt)("h4",{id:"get_nft_contentindex-int-individual_content-cell-cell"},(0,l.kt)("inlineCode",{parentName:"h4"},"get_nft_content(index: Int, individual_content: Cell): Cell")),(0,l.kt)("p",null,"Calls ",(0,l.kt)("inlineCode",{parentName:"p"},"_get_nft_content")," and returns the full content of the NFT item in a format that complies with standard TEP-64."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-typescript"},"// @dev get_nft_content calls _get_nft_content and returns the full content of the NFT item in format that complies with standard TEP-64.\nget fun get_nft_content(index: Int, individual_content: Cell): Cell {\n    return self._get_nft_content(index, individual_content);\n}\n")),(0,l.kt)("h2",{id:"usage"},"Usage"),(0,l.kt)("h3",{id:"basic-usage"},"Basic Usage"),(0,l.kt)("p",null,"To utilize the NFT Collection Standard, you need to implement an NFT Collection contract and override essential methods like ",(0,l.kt)("inlineCode",{parentName:"p"},"_get_nft_item_state_init")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"_get_nft_content"),"."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-typescript"},"// Your contract should look something like this\ncontract YourNFTCollection with NFTCollectionStandard {\n    // ... your custom properties and methods ...\n\n    override inline fun _get_nft_item_state_init(index: Int): StateInit {\n        // ... your implementation ...\n    }\n\n    override inline fun _get_nft_content(index: Int, individual_content: Cell): Cell {\n        // ... your implementation ...\n    }\n}\n")))}u.isMDXComponent=!0}}]);